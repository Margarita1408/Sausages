<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Visualization</title>
    <script src="https://public.tableau.com/javascripts/api/tableau-2.9.0.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center; /* Center everything horizontally */
        }
        #tableauViz {
            width: 90%; /* Adjust as needed, but keep it responsive */
            max-width: 1000px; /* Maximum width */
            height: 600px; /* Fixed height, adjust as needed */
            margin: 20px auto; /* Add margin and center the viz */
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: white; /* Ensure the viz background is white */
        }
        #description {
            width: 90%; /* Match the width of the visualization */
            max-width: 1000px; /* Match the max-width */
            margin: 20px auto; /* Add margin and center the description */
            padding: 15px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center; /* Center the description text */
        }
        #buttons {
            width: 90%; /* Match the width of the visualization */
            max-width: 1000px; /* Match the max-width */
            margin: 20px auto; /* Add margin and center the buttons */
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* Center the buttons */
            gap: 10px; /* Add some gap between buttons */
        }
        .button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .button:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.5);
        }
        h1 {
            text-align: center;
            margin-top: 20px;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <h1>Your Visualization</h1>
    <div id="tableauViz"></div>
    <div id="description">
        <p>This visualization provides an interactive exploration of data.  Use the controls within the visualization to filter and explore different aspects of the data.  The buttons below provide additional ways to interact with the visualization.</p>
    </div>
    <div id="buttons">
        <button id="resetButton" class="button">Reset Filters</button>
        <button id="filterButton" class="button">Apply Filter</button>
        <button id="exportButton" class="button">Export Data</button>
    </div>

    <script>
        let viz;
        function initViz() {
            const containerDiv = document.getElementById('tableauViz');
            const url = 'https://public.tableau.com/shared/MBG8PT35Q?:display_count=n&:origin=viz_share_link';
            const options = {
                hideTabs: true,
                onFirstInteractive: function() {
                    viz = vizInstance;
                    console.log("Viz is now interactive");
                }
            };
            const vizInstance = new tableau.Viz(containerDiv, url, options);
        }

        document.addEventListener('DOMContentLoaded', initViz);

        const resetButton = document.getElementById('resetButton');
        resetButton.addEventListener('click', function() {
            if (viz) {
                viz.revertAllAsync();
                console.log("Filters reset");
            } else {
                console.warn("Viz not initialized yet");
            }
        });

        const filterButton = document.getElementById('filterButton');
        filterButton.addEventListener('click', function() {
            if (viz) {
                //  Replace 'YourFieldName' and 'YourValue' with your actual field and value.
                viz.applyFilterAsync('Category', 'Furniture', tableau.FilterUpdateType.REPLACE);
                console.log("Filter applied");
            } else {
                console.warn("Viz not initialized yet");
            }
        });

        const exportButton = document.getElementById('exportButton');
        exportButton.addEventListener('click', function() {
            if (viz) {
                viz.exportDataAsync().then(function(data) {
                    console.log(data); //  Do something with the exported data
                    alert("Data exported to console.  See console for data."); // simple feedback
                });
            } else {
                console.warn("Viz not initialized yet");
            }
        });
    </script>
</body>
</html>

